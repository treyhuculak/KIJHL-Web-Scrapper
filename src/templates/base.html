<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ZebraZone{% endblock %}</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='zebrazone-logo-badge.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    {% block head_scripts %}
    {% endblock %}
</head>

<body>
    {% block body_prefix %}{% endblock %}
    
    <div class="container">
        {% block header %}
        <div class="header">
            {% block header_content %}
            <div class="header-logo-container">
                <img src="{{ url_for('static', filename='zebrazone-logo-badge.png') }}" alt="ZebraZone Logo"
                    class="header-badge-logo">
                {% block league_logo %}{% endblock %}
            </div>
            <h1>{% block page_title %}ZebraZone{% endblock %}</h1>
            <p>{% block page_subtitle %}{% endblock %}</p>
            {% block header_nav %}
            <!-- Navigation Bar -->
            <nav class="main-nav">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="/" class="nav-link" data-page="home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="games" id="navGamesLink">Game Centre</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="stats" id="navStatsLink">Stats</a>
                    </li>
                    <li class="nav-item disabled-nav">
                        <a href="#" class="nav-link" data-page="rosters">Roster</a>
                    </li>
                    <li class="nav-item has-dropdown">
                        <a href="#" class="nav-link" data-page="league">League <span class="dropdown-arrow">â–¼</span></a>
                        <ul class="dropdown-menu" id="leagueSwitcherDropdown">
                            <li><a href="#" data-league="kijhl">KIJHL</a></li>
                            <li><a href="#" data-league="whl">WHL</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            {% endblock %}
            {% endblock %}
        </div>
        {% endblock %}

        {% block content %}
        {% endblock %}
    </div>

    {% block scripts %}
    {% endblock %}

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Quick Links</h4>
                <a href="/">Home</a>
                <a href="/games?league=kijhl" id="footerGamesLink">Game Centre</a>
                <a href="/statistics" id="footerStatsLink">Officials Stats</a>
            </div>
            <div class="footer-section">
                <h4>About</h4>
                <a href="/about">About ZebraZone</a>
            </div>
            <div class="footer-section footer-branding">
                <img src="{{ url_for('static', filename='zebrazone-logo-landscape.png') }}" alt="ZebraZone" class="footer-logo">
                <p>&copy; 2026 ZebraZone</p>
                <p class="footer-tagline">Making hockey officiating data accessible</p>
            </div>
        </div>
    </footer>

    <!-- Navigation Script -->
    <script>
        (function() {
            // Get current page and league from URL
            const currentPath = window.location.pathname;
            const urlParams = new URLSearchParams(window.location.search);
            const currentLeague = urlParams.get('league') || 'kijhl';
            
            // Highlight current page in navigation
            const navLinks = document.querySelectorAll('.nav-item > .nav-link');
            navLinks.forEach(link => {
                const page = link.dataset.page;
                if (page === 'home' && currentPath === '/') {
                    link.classList.add('active');
                } else if (page === 'games' && currentPath === '/games') {
                    link.classList.add('active');
                } else if (page === 'stats' && (currentPath === '/statistics' || currentPath === '/leaderboard')) {
                    link.classList.add('active');
                } else if (page === 'rosters' && currentPath.includes('/rosters')) {
                    link.classList.add('active');
                }
            });
            
            // Highlight current league in League switcher dropdown
            const leagueSwitcherDropdown = document.getElementById('leagueSwitcherDropdown');
            if (leagueSwitcherDropdown) {
                const leagueLinks = leagueSwitcherDropdown.querySelectorAll('a[data-league]');
                leagueLinks.forEach(link => {
                    if (link.dataset.league === currentLeague) {
                        link.classList.add('active-league');
                    }
                    
                    // Handle league switch click
                    link.addEventListener('click', function(e) {
                        if (this.classList.contains('disabled')) return;
                        e.preventDefault();
                        const newLeague = this.dataset.league;
                        const newParams = new URLSearchParams(window.location.search);
                        newParams.set('league', newLeague);
                        window.location.href = currentPath + '?' + newParams.toString();
                    });
                });
            }
            
            // Update footer links with current league
            const footerGamesLink = document.getElementById('footerGamesLink');
            const footerStatsLink = document.getElementById('footerStatsLink');
            if (footerGamesLink) {
                footerGamesLink.href = '/games?league=' + currentLeague;
            }
            if (footerStatsLink) {
                footerStatsLink.href = '/statistics?league=' + currentLeague;
            }
            
            // Update nav links with current league
            const navGamesLink = document.getElementById('navGamesLink');
            const navStatsLink = document.getElementById('navStatsLink');
            if (navGamesLink) {
                navGamesLink.href = '/games?league=' + currentLeague;
            }
            if (navStatsLink) {
                navStatsLink.href = '/statistics?league=' + currentLeague;
            }
        })();
    </script>

    {% block footer_scripts %}
    {% endblock %}
</body>

</html>
